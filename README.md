SpreePapertrail
===============

Allows audit of customer orders shown at the time of purchase, keeping with historical changes in:

- Product
- Taxon (and Classification)
- Property (and ProductProperties)
- Variant (and their OptionValues with her OptionType)

Finally have a section in the backend, from where you can see the change history of an order.

Note: Remember that the history in the order is not enabled by default, you must enable this according to your needs.

Installation
------------

Add spree_papertrail to your Gemfile:

```ruby
gem 'spree_papertrail'
```

Bundle your dependencies and run the installation generator:

```shell
bundle
bundle exec rails g spree_papertrail:install
```

Usage
-----

To track product changes you need to add the following line to your order_decorator:

```ruby
after_save :make_version
```

Or, to track on specific transition:

```ruby
state_machine.before_transition from: :address, do: :make_version
```


Testing
-------

First bundle your dependencies, then run `rake`. `rake` will default to building the dummy app if it does not exist, then it will run specs. The dummy app can be regenerated by using `rake test_app`.

```shell
bundle
bundle exec rake
```

When testing your applications integration with this extension you may use it's factories.
Simply add this require statement to your spec_helper:

```ruby
require 'spree_papertrail/factories'
```

Copyright (c) 2014 [Acid Labs](http://acid.cl), released under the New BSD License
